# 黑屏问题修复说明 v2

## 已完成的修改

### 1. NonoManager.as
- **暂时注释掉 2112 常驻监听**：避免在游戏初始化时注册监听器导致黑屏
- **在 onFlyHandler 中添加保护**：
  - 添加 try-catch 块
  - 检查 ByteArray 是否为空或长度不足
  - 检查 MainManager.actorInfo 和 MainManager.actorModel 是否为空
  - 检查 clickMc 和 skeleton 是否为空

### 2. BasePeoleModel.as
- **在 FLY_MODE case 中添加空值检查**：
  - 检查 MainManager.actorInfo 是否为空
  - 修复 nonoColor 的类型问题（uint 类型不需要 null 检查）

### 3. UserListCmdListener.as
- **暂时注释掉 dispatchAction 调用**：避免在模型初始化时触发事件导致问题

## 测试步骤

1. 重新编译 Flash 客户端
2. 启动游戏，检查是否还会黑屏
3. 如果不再黑屏，说明问题出在：
   - NonoManager 的 2112 常驻监听（初始化时注册）
   - UserListCmdListener 的 dispatchAction（初始化时触发）
   - BasePeoleModel 的 FLY_MODE case（空值访问）

## 如果还是黑屏

可能的原因：
1. **编译错误**：检查 ActionScript 编译器是否有语法错误
2. **其他初始化问题**：可能是其他模块的初始化顺序问题
3. **资源加载问题**：检查是否有资源文件缺失

## 下一步调试

如果还是黑屏，需要：
1. 检查 Flash 编译器的错误日志
2. 逐步恢复被注释的代码，找出具体是哪一部分导致黑屏
3. 检查是否有其他文件被修改但未保存
